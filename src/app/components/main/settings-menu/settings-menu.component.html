<div class="relative">
  <!-- configButton -->
  <button
    (click)="toggleMenu()"
    class="mx-5 mt-1 text-gray-500 focus:outline-none rounded-full"
    aria-label="Open settings menu"
    [attr.aria-expanded]="isMenuOpen"
  >
    <img src="assets/Setting.png" alt="Settings" class="w-6 h-6" />
  </button>

  <!-- menu -->
  <div
    *ngIf="isMenuOpen"
    class="absolute right-0 mt-2 w-56 bg-white rounded-lg shadow-lg py-1 z-50"
  >
    <button
      (click)="openChangePassword()"
      class="flex items-center w-full mt-1 px-4 py-3 text-left text-sm font-medium text-gray-700 hover:bg-blue-50 focus:bg-blue-100 rounded-lg"
    >
      <img
        src="assets/Password.png"
        alt="Change Password"
        class="w-5 h-5 mr-2"
      />
      Change Password
    </button>
    <button
      (click)="logout()"
      class="flex items-center w-full px-4 py-3 text-left text-sm font-medium text-gray-700 hover:bg-blue-50 focus:bg-blue-100 rounded-lg"
    >
      <img src="assets/Logout.png" alt="Sign Out" class="w-5 h-5 mr-2" />
      Sign Out
    </button>
  </div>

  <!-- passwordDialog -->
  <div
    *ngIf="showPasswordPanel"
    class="fixed inset-0 z-10 bg-gray-900 bg-opacity-50 flex items-center justify-center"
    aria-labelledby="slide-over-title"
    role="dialog"
    aria-modal="true"
  >
    <div
      class="bg-white rounded-lg shadow-xl w-full max-w-md p-6 transform transition-all"
    >
      <!-- title -->
      <div class="mb-6">
        <h2 class="text-lg font-bold text-gray-800">Change Password</h2>
        <p class="text-sm text-gray-600">
          Please fill in the form to update your password.
        </p>
      </div>

      <!-- form -->
      <form (submit)="onSubmit($event)" class="space-y-5">
        <div>
          <label class="block text-sm font-medium text-gray-700">
            Current Password
          </label>
          <input
            type="password"
            [(ngModel)]="currentPassword"
            name="currentPassword"
            class="w-full mt-1 p-3 border rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500"
            required
          />
        </div>

        <div>
          <label class="block text-sm font-medium text-gray-700">
            New Password
          </label>
          <input
            type="password"
            [(ngModel)]="newPassword"
            name="newPassword"
            class="w-full mt-1 p-3 border rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500"
            required
          />
        </div>

        <div>
          <label class="block text-sm font-medium text-gray-700">
            Confirm New Password
          </label>
          <input
            type="password"
            [(ngModel)]="confirmPassword"
            name="confirmPassword"
            class="w-full mt-1 p-3 border rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500"
            required
          />
        </div>

        <!-- buttons -->
        <div class="flex justify-end space-x-3">
          <button
            type="button"
            (click)="closePasswordPanel()"
            class="px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 focus:ring-2 focus:ring-blue-500"
          >
            Cancel
          </button>
          <button
            type="submit"
            [disabled]="isSubmitting"
            class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:ring-2 focus:ring-blue-500"
          >
            <span *ngIf="isSubmitting" class="loader mr-2"></span>
            Change Password
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
